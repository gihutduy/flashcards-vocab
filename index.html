
<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Flashcards — Học từ vựng</title>

  <!-- Tailwind CDN (quick, for demo) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React & ReactDOM (production) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Babel for JSX (acceptable for small static demo) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    /* small helper for card flip */
    .card-face {
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      transition: transform 0.4s;
    }
    .card-front { transform: rotateY(0deg); }
    .card-back  { transform: rotateY(180deg); position: absolute; left:0; top:0; width:100%; height:100%; }
    .flipped .card-front { transform: rotateY(-180deg); }
    .flipped .card-back  { transform: rotateY(0deg); }
  </style>
</head>
<body class="bg-sky-50 min-h-screen flex items-center justify-center p-4">
  <div id="root" class="w-full max-w-2xl"></div>

  <script type="text/babel">

  const { useState, useEffect, useRef } = React;

  /************* DATA *************/
  const WORDS = [
  {word: "beginning", ipa: "/bɪˈɡɪnɪŋ/", pos: "n", vn: "sự bắt đầu"},
  {word: "beginning", ipa: "/bɪˈɡɪnɪŋ/", pos: "n", vn: "sự bắt đầu"},
  {word: "sit", ipa: "/sɪt/", pos: "v", vn: "ngồi"},
  {word: "soup", ipa: "/suːp/", pos: "n", vn: "súp"},
  {word: "salt", ipa: "/sɔːlt/", pos: "n", vn: "muối"},
  {word: "seal", ipa: "/siːl/", pos: "n/v", vn: "hải cẩu; niêm phong"},
  {word: "sick", ipa: "/sɪk/", pos: "adj", vn: "ốm, bệnh"},
  {word: "sing", ipa: "/sɪŋ/", pos: "v", vn: "hát"},
  {word: "sun", ipa: "/sʌn/", pos: "n", vn: "mặt trời"},
  {word: "save", ipa: "/seɪv/", pos: "v", vn: "lưu, cứu"},
  {word: "seed", ipa: "/siːd/", pos: "n", vn: "hạt giống"},
  {word: "seat", ipa: "/siːt/", pos: "n", vn: "ghế, chỗ ngồi"},
  {word: "city", ipa: "/ˈsɪti/", pos: "n", vn: "thành phố"},
  {word: "said", ipa: "/sed/", pos: "v (past of say)", vn: "đã nói"},
  {word: "sad", ipa: "/sæd/", pos: "adj", vn: "buồn"},
  {word: "sorry", ipa: "/ˈsɒri/", pos: "adj", vn: "xin lỗi, tiếc"},
  {word: "soap", ipa: "/səʊp/", pos: "n", vn: "xà phòng"},
  {word: "sock", ipa: "/sɒk/", pos: "n", vn: "tất, vớ"},
  {word: "sail", ipa: "/seɪl/", pos: "v/n", vn: "đi thuyền; cánh buồm"},
  {word: "sour", ipa: "/ˈsaʊər/", pos: "adj", vn: "chua"},
  {word: "sign", ipa: "/saɪn/", pos: "n/v", vn: "dấu hiệu; ký tên"},
  {word: "sand", ipa: "/sænd/", pos: "n", vn: "cát"},
  {word: "soft", ipa: "/sɒft/", pos: "adj", vn: "mềm"},
  {word: "seven", ipa: "/ˈsevən/", pos: "num", vn: "bảy"},
  {word: "sink", ipa: "/sɪŋk/", pos: "v/n", vn: "chìm; bồn rửa"},
  {word: "son", ipa: "/sʌn/", pos: "n", vn: "con trai"},
  {word: "safe", ipa: "/seɪf/", pos: "adj", vn: "an toàn"},
  {word: "baseball", ipa: "/ˈbeɪsbɔːl/", pos: "n", vn: "bóng chày"},
  {word: "dancer", ipa: "/ˈdænsər/", pos: "n", vn: "vũ công"},
  {word: "gasoline", ipa: "/ˈɡæsəliːn/", pos: "n", vn: "xăng"},
  {word: "grasshopper", ipa: "/ˈɡræsˌhɒpər/", pos: "n", vn: "châu chấu"},
  {word: "motorcycle", ipa: "/ˈməʊtərˌsaɪkl/", pos: "n", vn: "xe máy"},
  {word: "fossil", ipa: "/ˈfɒsəl/", pos: "n", vn: "hoá thạch"},
  {word: "pencil", ipa: "/ˈpensəl/", pos: "n", vn: "bút chì"},
  {word: "muscle", ipa: "/ˈmʌsəl/", pos: "n", vn: "cơ bắp"},
  {word: "beside", ipa: "/bɪˈsaɪd/", pos: "prep", vn: "bên cạnh"},
  {word: "racing", ipa: "/ˈreɪsɪŋ/", pos: "n", vn: "cuộc đua"},
  {word: "insect", ipa: "/ˈɪnsekt/", pos: "n", vn: "côn trùng"},
  {word: "recipe", ipa: "/ˈresəpi/", pos: "n", vn: "công thức (nấu ăn)"},
  {word: "medicine", ipa: "/ˈmedɪsɪn/", pos: "n", vn: "thuốc"},
  {word: "listen", ipa: "/ˈlɪsən/", pos: "v", vn: "lắng nghe"},
  {word: "glasses", ipa: "/ˈɡlɑːsɪz/", pos: "n", vn: "kính đeo mắt"},
  {word: "bicycle", ipa: "/ˈbaɪsɪkl/", pos: "n", vn: "xe đạp"},
  {word: "dinosaur", ipa: "/ˈdaɪnəsɔːr/", pos: "n", vn: "khủng long"},
  {word: "popsicle", ipa: "/ˈpɒpsɪkl/", pos: "n", vn: "kem que"},
  {word: "eraser", ipa: "/ɪˈreɪsər/", pos: "n", vn: "cục tẩy"},
  {word: "faucet", ipa: "/ˈfɔːsɪt/", pos: "n", vn: "vòi nước"},
  {word: "messy", ipa: "/ˈmesi/", pos: "adj", vn: "bừa bộn"},
  {word: "outside", ipa: "/ˌaʊtˈsaɪd/", pos: "adv/prep", vn: "bên ngoài"},
  {word: "passing", ipa: "/ˈpɑːsɪŋ/", pos: "n/adj", vn: "sự đi qua; thoáng qua"},
  {word: "whistle", ipa: "/ˈwɪsəl/", pos: "n/v", vn: "còi; huýt sáo"},
  {word: "policeman", ipa: "/pəˈliːsmən/", pos: "n", vn: "cảnh sát"},
    {word: "bus", ipa: "/bʌs/", pos: "n", vn: "xe buýt"},
  {word: "face", ipa: "/feɪs/", pos: "n/v", vn: "khuôn mặt; đối mặt"},
  {word: "ice", ipa: "/aɪs/", pos: "n", vn: "đá (lạnh)"},
  {word: "grass", ipa: "/ɡræs/", pos: "n", vn: "cỏ"},
  {word: "horse", ipa: "/hɔːrs/", pos: "n", vn: "ngựa"},
  {word: "yes", ipa: "/jes/", pos: "adv", vn: "vâng, có"},
  {word: "address", ipa: "/əˈdres/", pos: "n/v", vn: "địa chỉ; phát biểu"},
  {word: "office", ipa: "/ˈɒfɪs/", pos: "n", vn: "văn phòng"},
  {word: "purse", ipa: "/pɜːrs/", pos: "n", vn: "ví (nữ)"},
  {word: "glass", ipa: "/ɡlɑːs/", pos: "n", vn: "ly, thủy tinh"},
  {word: "pass", ipa: "/pæs/", pos: "v/n", vn: "vượt qua; vé"},
  {word: "voice", ipa: "/vɔɪs/", pos: "n", vn: "giọng nói"},
  {word: "nice", ipa: "/naɪs/", pos: "adj", vn: "dễ chịu, tốt"},
  {word: "lips", ipa: "/lɪps/", pos: "n", vn: "môi"},
  {word: "class", ipa: "/klɑːs/", pos: "n", vn: "lớp học"},
  {word: "dress", ipa: "/dres/", pos: "n/v", vn: "váy; mặc đồ"},
  {word: "erase", ipa: "/ɪˈreɪs/", pos: "v", vn: "xóa"},
  {word: "house", ipa: "/haʊs/", pos: "n", vn: "ngôi nhà"},
  {word: "mouse", ipa: "/maʊs/", pos: "n", vn: "con chuột"},
  {word: "race", ipa: "/reɪs/", pos: "n/v", vn: "cuộc đua; chạy đua"},
  {word: "lettuce", ipa: "/ˈletɪs/", pos: "n", vn: "rau diếp"},
  {word: "fence", ipa: "/fens/", pos: "n", vn: "hàng rào"},
  {word: "miss", ipa: "/mɪs/", pos: "v", vn: "nhớ, bỏ lỡ"},
  {word: "juice", ipa: "/dʒuːs/", pos: "n", vn: "nước ép"},
  {word: "this", ipa: "/ðɪs/", pos: "pron", vn: "cái này"},
  {word: "scoop", ipa: "/skuːp/", pos: "n/v", vn: "muỗng; múc"},
  {word: "scare", ipa: "/skeər/", pos: "v/n", vn: "làm sợ; sự hoảng sợ"},
  {word: "scarf", ipa: "/skɑːrf/", pos: "n", vn: "khăn quàng"},
  {word: "skirt", ipa: "/skɜːrt/", pos: "n", vn: "váy"},
  {word: "scout", ipa: "/skaʊt/", pos: "n/v", vn: "hướng đạo sinh; trinh sát"},
  {word: "scale", ipa: "/skeɪl/", pos: "n", vn: "cái cân; quy mô"},
  {word: "skinny", ipa: "/ˈskɪni/", pos: "adj", vn: "gầy"},
  {word: "scar", ipa: "/skɑːr/", pos: "n/v", vn: "vết sẹo; để lại sẹo"},
  {word: "score", ipa: "/skɔːr/", pos: "n/v", vn: "điểm số; ghi điểm"},
  {word: "skill", ipa: "/skɪl/", pos: "n", vn: "kỹ năng"},
  {word: "skip", ipa: "/skɪp/", pos: "v", vn: "nhảy lò cò; bỏ qua"},
  {word: "skull", ipa: "/skʌl/", pos: "n", vn: "sọ"},
  {word: "skunk", ipa: "/skʌŋk/", pos: "n", vn: "con chồn hôi"},
  {word: "scab", ipa: "/skæb/", pos: "n", vn: "vảy (vết thương)"},
  {word: "skim", ipa: "/skɪm/", pos: "v", vn: "hớt (bề mặt); đọc lướt"},
  {word: "school", ipa: "/skuːl/", pos: "n", vn: "trường học"},
  {word: "skin", ipa: "/skɪn/", pos: "n", vn: "da"},
  {word: "skate", ipa: "/skeɪt/", pos: "v/n", vn: "trượt băng; giày trượt"},
  {word: "ski", ipa: "/skiː/", pos: "v/n", vn: "trượt tuyết"},
  {word: "sky", ipa: "/skaɪ/", pos: "n", vn: "bầu trời"},
  {word: "slow", ipa: "/sləʊ/", pos: "adj/v", vn: "chậm; làm chậm"},
  {word: "sled", ipa: "/sled/", pos: "n", vn: "xe trượt tuyết"},
  {word: "slacker", ipa: "/ˈslækər/", pos: "n", vn: "người lười biếng"},
  {word: "slam", ipa: "/slæm/", pos: "v", vn: "đóng sầm, đập mạnh"},
  {word: "slab", ipa: "/slæb/", pos: "n", vn: "tấm, phiến (đá, gỗ)"},
  {word: "slave", ipa: "/sleɪv/", pos: "n/v", vn: "nô lệ"},
  {word: "sleigh", ipa: "/sleɪ/", pos: "n", vn: "xe trượt tuyết"},
  {word: "slick", ipa: "/slɪk/", pos: "adj", vn: "trơn, khéo léo"},
  {word: "slit", ipa: "/slɪt/", pos: "n/v", vn: "khe hở; rạch"},
  {word: "slim", ipa: "/slɪm/", pos: "adj", vn: "mảnh mai"},
  {word: "sliver", ipa: "/ˈslɪvər/", pos: "n", vn: "mảnh nhỏ, lát mỏng"},
  {word: "sludge", ipa: "/slʌdʒ/", pos: "n", vn: "bùn đặc"},
  {word: "slug", ipa: "/slʌɡ/", pos: "n", vn: "sên; viên đạn"},
  {word: "slant", ipa: "/slænt/", pos: "v/n", vn: "nghiêng; góc nhìn"},
  {word: "slob", ipa: "/slɒb/", pos: "n", vn: "người nhếch nhác"},
  {word: "sleeve", ipa: "/sliːv/", pos: "n", vn: "tay áo"},
  {word: "sleep", ipa: "/sliːp/", pos: "v/n", vn: "ngủ"},
  {word: "slip", ipa: "/slɪp/", pos: "v", vn: "trượt"},
  {word: "slide", ipa: "/slaɪd/", pos: "v/n", vn: "trượt; cầu trượt"},
  {word: "slap", ipa: "/slæp/", pos: "v/n", vn: "tát, vỗ"},
    {word: "smell", ipa: "/smel/", pos: "v/n", vn: "ngửi; mùi"},
  {word: "smoke", ipa: "/sməʊk/", pos: "n/v", vn: "khói; hút thuốc"},
  {word: "smog", ipa: "/smɒɡ/", pos: "n", vn: "khói bụi (ô nhiễm)"},
  {word: "smear", ipa: "/smɪər/", pos: "v", vn: "bôi, làm lem"},
  {word: "smooch", ipa: "/smuːtʃ/", pos: "v/n", vn: "hôn (thắm thiết)"},
  {word: "smudge", ipa: "/smʌdʒ/", pos: "n/v", vn: "vết bẩn; làm lem"},
  {word: "smug", ipa: "/smʌɡ/", pos: "adj", vn: "tự mãn"},
  {word: "smock", ipa: "/smɒk/", pos: "n", vn: "áo choàng (bảo hộ)"},
  {word: "smooth", ipa: "/smuːð/", pos: "adj", vn: "mịn, trơn"},
  {word: "smack", ipa: "/smæk/", pos: "v/n", vn: "đập, tát; tiếng đánh"},
  {word: "smite", ipa: "/smaɪt/", pos: "v", vn: "đánh mạnh, trừng phạt"},
  {word: "smoky", ipa: "/ˈsməʊki/", pos: "adj", vn: "có khói"},
  {word: "smother", ipa: "/ˈsmʌðər/", pos: "v", vn: "làm ngạt, bao phủ"},
  {word: "smuggle", ipa: "/ˈsmʌɡəl/", pos: "v", vn: "buôn lậu"},
  {word: "smart", ipa: "/smɑːrt/", pos: "adj", vn: "thông minh"},
  {word: "smash", ipa: "/smæʃ/", pos: "v", vn: "đập vỡ"},
  {word: "small", ipa: "/smɔːl/", pos: "adj", vn: "nhỏ"},
  {word: "smile", ipa: "/smaɪl/", pos: "v/n", vn: "cười; nụ cười"},
    {word: "snail", ipa: "/sneɪl/", pos: "n", vn: "con ốc sên"},
  {word: "snack", ipa: "/snæk/", pos: "n", vn: "đồ ăn nhẹ"},
  {word: "snarl", ipa: "/snɑːrl/", pos: "v", vn: "gầm gừ"},
  {word: "snatch", ipa: "/snætʃ/", pos: "v", vn: "chộp, giật"},
  {word: "snoop", ipa: "/snuːp/", pos: "v", vn: "rình mò"},
  {word: "snot", ipa: "/snɒt/", pos: "n", vn: "nước mũi"},
  {word: "sneak", ipa: "/sniːk/", pos: "v", vn: "lén lút"},
  {word: "snip", ipa: "/snɪp/", pos: "v/n", vn: "cắt nhanh; mẩu nhỏ"},
  {word: "snag", ipa: "/snæɡ/", pos: "n/v", vn: "vướng; trở ngại"},
  {word: "snob", ipa: "/snɒb/", pos: "n", vn: "kẻ trưởng giả học làm sang"},
  {word: "snuggle", ipa: "/ˈsnʌɡəl/", pos: "v", vn: "ôm ấp, cuộn mình"},
  {word: "snooze", ipa: "/smuːz/", pos: "v/n", vn: "ngủ ngắn; giấc ngủ ngắn"},
  {word: "sniffle", ipa: "/ˈsnɪfəl/", pos: "v/n", vn: "sụt sịt"},
  {word: "snout", ipa: "/snaʊt/", pos: "n", vn: "mõm (động vật)"},
  {word: "snorkel", ipa: "/ˈsnɔːrkəl/", pos: "n/v", vn: "ống thở; lặn bằng ống"},
  {word: "snicker", ipa: "/ˈsnɪkər/", pos: "v/n", vn: "cười khúc khích"},
  {word: "snitch", ipa: "/snɪtʃ/", pos: "v/n", vn: "mách lẻo; kẻ chỉ điểm"},
  {word: "snowball", ipa: "/ˈsnəʊˌbɔːl/", pos: "n", vn: "quả cầu tuyết"},
  {word: "snort", ipa: "/snɔːrt/", pos: "v", vn: "khịt mũi, thở phì"},
  {word: "snap", ipa: "/snæp/", pos: "v/n", vn: "bẻ gãy; ảnh chụp"},
  {word: "snake", ipa: "/sneɪk/", pos: "n", vn: "con rắn"},
  {word: "sneeze", ipa: "/sniːz/", pos: "v", vn: "hắt hơi"},
  {word: "snow", ipa: "/snəʊ/", pos: "n", vn: "tuyết"},
  {word: "snore", ipa: "/snɔːr/", pos: "v/n", vn: "ngáy"},
    {word: "snail", ipa: "/sneɪl/", pos: "n", vn: "con ốc sên"},
  {word: "snack", ipa: "/snæk/", pos: "n", vn: "đồ ăn nhẹ"},
  {word: "snarl", ipa: "/snɑːrl/", pos: "v", vn: "gầm gừ"},
  {word: "snatch", ipa: "/snætʃ/", pos: "v", vn: "chộp, giật"},
  {word: "snoop", ipa: "/snuːp/", pos: "v", vn: "rình mò"},
  {word: "snot", ipa: "/snɒt/", pos: "n", vn: "nước mũi"},
  {word: "sneak", ipa: "/sniːk/", pos: "v", vn: "lén lút"},
  {word: "snip", ipa: "/snɪp/", pos: "v/n", vn: "cắt nhanh; mẩu nhỏ"},
  {word: "snag", ipa: "/snæɡ/", pos: "n/v", vn: "vướng; trở ngại"},
  {word: "snob", ipa: "/snɒb/", pos: "n", vn: "kẻ trưởng giả học làm sang"},
  {word: "snuggle", ipa: "/ˈsnʌɡəl/", pos: "v", vn: "ôm ấp, cuộn mình"},
  {word: "snooze", ipa: "/smuːz/", pos: "v/n", vn: "ngủ ngắn; giấc ngủ ngắn"},
  {word: "sniffle", ipa: "/ˈsnɪfəl/", pos: "v/n", vn: "sụt sịt"},
  {word: "snout", ipa: "/snaʊt/", pos: "n", vn: "mõm (động vật)"},
  {word: "snorkel", ipa: "/ˈsnɔːrkəl/", pos: "n/v", vn: "ống thở; lặn bằng ống"},
  {word: "snicker", ipa: "/ˈsnɪkər/", pos: "v/n", vn: "cười khúc khích"},
  {word: "snitch", ipa: "/snɪtʃ/", pos: "v/n", vn: "mách lẻo; kẻ chỉ điểm"},
  {word: "snowball", ipa: "/ˈsnəʊˌbɔːl/", pos: "n", vn: "quả cầu tuyết"},
  {word: "snort", ipa: "/snɔːrt/", pos: "v", vn: "khịt mũi, thở phì"},
  {word: "snap", ipa: "/snæp/", pos: "v/n", vn: "bẻ gãy; ảnh chụp"},
  {word: "snake", ipa: "/sneɪk/", pos: "n", vn: "con rắn"},
  {word: "sneeze", ipa: "/sniːz/", pos: "v", vn: "hắt hơi"},
  {word: "snow", ipa: "/snəʊ/", pos: "n", vn: "tuyết"},
  {word: "snore", ipa: "/snɔːr/", pos: "v/n", vn: "ngáy"},
    {word: "stamp", ipa: "/stæmp/", pos: "n/v", vn: "con tem; đóng dấu"},
  {word: "step", ipa: "/step/", pos: "n/v", vn: "bước; bước đi"},
  {word: "stack", ipa: "/stæk/", pos: "n/v", vn: "chồng, xếp chồng"},
  {word: "stand", ipa: "/stænd/", pos: "v/n", vn: "đứng; quầy"},
  {word: "stay", ipa: "/steɪ/", pos: "v/n", vn: "ở lại; kỳ nghỉ"},
  {word: "steal", ipa: "/stiːl/", pos: "v", vn: "ăn cắp"},
  {word: "steer", ipa: "/stɪər/", pos: "v", vn: "lái (tàu, xe)"},
  {word: "stitch", ipa: "/stɪtʃ/", pos: "n/v", vn: "mũi khâu; khâu lại"},
  {word: "still", ipa: "/stɪl/", pos: "adv", vn: "vẫn, yên tĩnh"},
  {word: "steam", ipa: "/stiːm/", pos: "n/v", vn: "hơi nước; hấp"},
  {word: "stone", ipa: "/stəʊn/", pos: "n", vn: "đá"},
  {word: "stop", ipa: "/stɒp/", pos: "v/n", vn: "dừng; trạm"},
  {word: "stem", ipa: "/stem/", pos: "n/v", vn: "thân cây; ngăn lại"},
  {word: "state", ipa: "/steɪt/", pos: "n/v", vn: "tiểu bang; phát biểu"},
  {word: "stick", ipa: "/stɪk/", pos: "n/v", vn: "cây gậy; dán, dính"},
  {word: "sting", ipa: "/stɪŋ/", pos: "v/n", vn: "chích, đốt; vết đốt"},
  {word: "store", ipa: "/stɔːr/", pos: "n/v", vn: "cửa hàng; lưu trữ"},
  {word: "stage", ipa: "/steɪdʒ/", pos: "n", vn: "sân khấu; giai đoạn"},
  {word: "steak", ipa: "/steɪk/", pos: "n", vn: "miếng thịt bò nướng"},
  {word: "start", ipa: "/stɑːrt/", pos: "v/n", vn: "bắt đầu"},
  {word: "stir", ipa: "/stɜːr/", pos: "v", vn: "khuấy, trộn"},
  {word: "storm", ipa: "/stɔːrm/", pos: "n", vn: "cơn bão"},
  {word: "stuck", ipa: "/stʌk/", pos: "v (past of stick)", vn: "bị kẹt"},
  {word: "sticker", ipa: "/ˈstɪkər/", pos: "n", vn: "nhãn dán"},
  {word: "star", ipa: "/stɑːr/", pos: "n", vn: "ngôi sao"},
  {word: "stairs", ipa: "/steərz/", pos: "n", vn: "cầu thang"},
  {word: "story", ipa: "/ˈstɔːri/", pos: "n", vn: "câu chuyện"},
  {word: "student", ipa: "/ˈstuːdənt/", pos: "n", vn: "học sinh, sinh viên"},
    {word: "sweep", ipa: "/swiːp/", pos: "v", vn: "quét"},
  {word: "swallow", ipa: "/ˈswɒləʊ/", pos: "v/n", vn: "nuốt; chim nhạn"},
  {word: "swaddle", ipa: "/ˈswɒdəl/", pos: "v", vn: "quấn tã (em bé)"},
  {word: "swam", ipa: "/swæm/", pos: "v (past of swim)", vn: "đã bơi"},
  {word: "swap", ipa: "/swɒp/", pos: "v/n", vn: "trao đổi"},
  {word: "swarm", ipa: "/swɔːrm/", pos: "n/v", vn: "bầy đàn; bu quanh"},
  {word: "swear", ipa: "/sweər/", pos: "v", vn: "thề; chửi thề"},
  {word: "swat", ipa: "/swɒt/", pos: "v", vn: "đập (bọ)"},
  {word: "sway", ipa: "/sweɪ/", pos: "v/n", vn: "lắc lư"},
  {word: "swell", ipa: "/swel/", pos: "v", vn: "sưng, phồng"},
  {word: "swept", ipa: "/swept/", pos: "v (past of sweep)", vn: "đã quét"},
  {word: "swipe", ipa: "/swaɪp/", pos: "v", vn: "vuốt; quẹt thẻ"},
  {word: "switch", ipa: "/swɪtʃ/", pos: "n/v", vn: "công tắc; chuyển đổi"},
  {word: "sword", ipa: "/sɔːrd/", pos: "n", vn: "thanh kiếm"},
  {word: "swollen", ipa: "/ˈswəʊlən/", pos: "adj", vn: "sưng phồng"},
  {word: "swamp", ipa: "/swɒmp/", pos: "n", vn: "đầm lầy"},
  {word: "swim", ipa: "/swɪm/", pos: "v", vn: "bơi"},
  {word: "swan", ipa: "/swɒn/", pos: "n", vn: "con thiên nga"},
  {word: "swing", ipa: "/swɪŋ/", pos: "v/n", vn: "đu đưa; xích đu"},
  {word: "sweater", ipa: "/ˈswetər/", pos: "n", vn: "áo len"},
  {word: "sweet", ipa: "/swiːt/", pos: "adj/n", vn: "ngọt; kẹo"},
  {word: "sweat", ipa: "/swet/", pos: "n/v", vn: "mồ hôi; đổ mồ hôi"},
  ];

  const STORAGE_KEY = "flashcards_v1";

  function loadProgress() {
    try {
      const raw = localStorage.getItem(STORAGE_KEY);
      return raw ? JSON.parse(raw) : {};
    } catch (e) {
      return {};
    }
  }
  function saveProgress(obj) {
    try {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(obj));
    } catch (e) { }
  }

  function App() {
    const [cards, setCards] = React.useState(WORDS.map((w,i)=>({...w,id:i})));
    const [idx, setIdx] = React.useState(0);
    const [flipped, setFlipped] = React.useState(false);
    const [progress, setProgress] = React.useState(loadProgress());
    const fileRef = React.useRef(null);

    React.useEffect(()=> saveProgress(progress), [progress]);

    function next() {
      setFlipped(false);
      setIdx(i => (i+1) % cards.length);
    }
    function prev() {
      setFlipped(false);
      setIdx(i => (i-1 + cards.length) % cards.length);
    }
    function shuffle() {
      const arr = [...cards];
      for (let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]]=[arr[j],arr[i]];
      }
      setCards(arr);
      setIdx(0);
    }
    function mark(id, status) {
      const now = new Date().toISOString();
      const p = {...progress, [id]: {status, last: now}};
      setProgress(p);
    }
    function speak(text){
      if(!window.speechSynthesis) return;
      const u = new SpeechSynthesisUtterance(text);
      u.lang = "en-US";
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(u);
    }
    function exportJSON(){
      const payload = {cards, progress};
      const blob = new Blob([JSON.stringify(payload, null, 2)], {type:"application/json"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url; a.download = "flashcards_export.json"; a.click();
      URL.revokeObjectURL(url);
    }
    function importJSON(e){
      const file = e.target.files[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = ev => {
        try{
          const parsed = JSON.parse(ev.target.result);
          if(parsed.cards) {
            const withId = parsed.cards.map((c,i)=>({...c, id:c.id ?? i}));
            setCards(withId);
          }
          if(parsed.progress) setProgress(parsed.progress);
          alert("Imported!");
        } catch(err){
          alert("File không hợp lệ.");
        }
      };
      reader.readAsText(file);
      e.target.value = "";
    }

    const card = cards[idx] || {word:"—", ipa:"", vn:""};
    const knownCount = Object.values(progress).filter(p=>p.status==="known").length;
    const againCount = Object.values(progress).filter(p=>p.status==="again").length;

    return (
      <div className="bg-white rounded-2xl shadow-lg p-6 w-full">
        <header className="flex items-center justify-between mb-4">
          <h1 className="text-xl font-bold">Flashcards — Học từ vựng</h1>
          <div className="text-sm">{idx+1}/{cards.length}</div>
        </header>

        <main className="flex flex-col md:flex-row gap-4">
          <section className="flex-1">
            <div className={`relative w-full h-52 md:h-64 perspective`}>
              <div className={`relative w-full h-full bg-slate-50 rounded-xl p-6 flex flex-col items-center justify-center transform transition-transform duration-500 ${flipped ? "flipped":""}`}>
                <div className="card-face card-front text-center">
                  <div className="text-3xl font-semibold mb-2">{card.word}</div>
                  <div className="text-lg italic mb-2">{card.ipa}</div>
                  <div className="text-sm text-gray-500">Chạm Flip để xem nghĩa</div>
                </div>
                <div className="card-face card-back text-center">
                  <div className="text-2xl font-medium mb-1">{card.word}</div>
                  <div className="italic mb-2">{card.ipa}</div>
                  <div className="text-base text-gray-700">{card.vn}</div>
                  <div className="text-xs text-gray-500 mt-1">{card.pos}</div>
                </div>
              </div>
            </div>

            <div className="mt-4 flex gap-2 justify-center">
              <button className="px-4 py-2 bg-blue-600 text-white rounded" onClick={()=>speak(card.word)}>Speak</button>
              <button className="px-4 py-2 bg-gray-200 rounded" onClick={()=>setFlipped(f=>!f)}>Flip</button>
              <button className="px-4 py-2 bg-white rounded shadow" onClick={prev}>Prev</button>
              <button className="px-4 py-2 bg-white rounded shadow" onClick={next}>Next</button>
            </div>

            <div className="mt-4 flex gap-2 justify-center">
              <button className="px-3 py-2 bg-red-500 text-white rounded" onClick={()=>{mark(card.id,"again"); next();}}>Again</button>
              <button className="px-3 py-2 bg-green-600 text-white rounded" onClick={()=>{mark(card.id,"known"); next();}}>Known</button>
            </div>
          </section>

          <aside className="w-full md:w-64">
            <div className="bg-sky-50 p-3 rounded">
              <div className="font-medium mb-2">Tools</div>
              <div className="flex flex-col gap-2">
                <button className="px-3 py-2 bg-white rounded shadow text-left" onClick={shuffle}>Shuffle cards</button>
                <button className="px-3 py-2 bg-white rounded shadow text-left" onClick={()=>{setCards(WORDS.map((w,i)=>({...w,id:i}))); setIdx(0); setProgress({});}}>Reset deck</button>
                <button className="px-3 py-2 bg-white rounded shadow text-left" onClick={exportJSON}>Export JSON</button>
                <label className="px-3 py-2 bg-white rounded shadow cursor-pointer text-left">
                  Import JSON
                  <input type="file" accept="application/json" onChange={importJSON} ref={fileRef} className="hidden" />
                </label>
              </div>

              <div className="mt-3 text-sm">
                <div>Known: <strong>{knownCount}</strong></div>
                <div>Again: <strong>{againCount}</strong></div>
                <div className="mt-2 text-xs text-gray-500">Progress lưu cục bộ (localStorage).</div>
              </div>

              <div className="mt-3 text-xs text-gray-500">Bạn có thể mở rộng: thêm ví dụ câu, SRS, đồng bộ hoá với GitHub/GDrive.</div>
            </div>
          </aside>
        </main>

        <footer className="mt-4 text-center text-xs text-gray-600">
          <div>Static site — host dễ dàng bằng GitHub Pages.</div>
        </footer>
      </div>
    );
  }

  ReactDOM.createRoot(document.getElementById("root")).render(<div className="p-4"><App /></div>);

  </script>
</body>
</html>
